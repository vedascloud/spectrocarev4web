<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }"></ngx-loading>
<div class="container-fluid">
    <div class="row"> <!--background-color: #F8FCFD;-->
        <div class="col-md-12 p-0">
            <app-header [titleData]="titleArray"></app-header>
        </div>

        <div class=" w-100">
            <mat-tab-group animationDuration="0ms" (selectedTabChange)="onTabChange($event)" > <!--(click)="callPaymentTransactions()"-->
                <mat-tab label="Invoices">
                    <div class="container-fluid">
                        <div class="row" style="background-color: #F8FCFD;">
                            <div class="col-md-12 p-3">
                                <div class="card ">
                                    <div class="card-body p-2">
                                        <div>
                                            <div class="row py-1">
                                                <div class="col-md-3 text-center ">
                                                    <button class="btn btn-sm btn-info text-white p-2 w-75 "
                                                        (click)="openCreateInvoiceModal(viewCreateInvoiceContent)"
                                                        style="border: none; width: 10%;font-weight: normal;font-size: 14px;">

                                                        <img src="../../../assets/images/ui/Icons/1x/add.png"
                                                            style="width: 10px;margin-right: 7px;">
                                                        Create New Invoice
                                                    </button>

                                                </div>
                                                <div class="col-md-6 row mr-2 ">
                                                    <input type="text" [(ngModel)]="term"
                                                        class="bg-transparent px-1 w-100 " placeholder="Search by Key"
                                                        style="border-radius: 5px; outline-style: none !important; font-size: 14px;">
                                                </div>
                                                <div class="col-md-3  ">
                                                    <div class="form-control">
                                                        <mat-select (selectionChange)="showData($event.value)"
                                                            [value]="selected" style="font-size: 14px;">
                                                            <mat-option *ngFor="let letSearch of searchByValue"
                                                                [value]="letSearch.viewValue">
                                                                {{letSearch.viewValue}}
                                                            </mat-option>
                                                        </mat-select>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="scroll">
                                                <table class="table text-center">
                                                    <thead class="thead-dark ">
                                                        <tr class="medium" style="font-weight: 300;font-size: 12px;">
                                                            <th scope="col" class="border text-center">No</th>
                                                            <th scope="col" class="border  text-center">Invoice</th>
                                                            <th scope="col" class="border text-center">Client</th>
                                                            <th scope="col" class="border text-center">Terms</th>
                                                            <th scope="col" class="border  text-center">Amount</th>
                                                            <th scope="col" class="border text-center">Issue Date</th>
                                                            <th scope="col" class="border text-center">Status</th>
                                                            <th scope="col" class="border  text-center">Action</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr class=" shadow small "
                                                            *ngFor="let selectedInvoicesData of invoicesData | filter:term; let i = index">

                                                            <td scope="row" class="text-center">{{i+1}}</td>
                                                            <td class="text-center" style="">
                                                                {{selectedInvoicesData.invoiceNumber}}</td>
                                                            <td class="" style="padding-left: 20px;">
                                                                {{selectedInvoicesData.clientDetails.name}}</td>
                                                            <td class="" style="padding-left: 50px;">
                                                                {{selectedInvoicesData.serviceItems[0].serviceName}}</td>
                                                            <td class="text-center" style="">
                                                                {{selectedInvoicesData.totalAmount}}</td>
                                                            <td class="text-center" style="">
                                                                {{selectedInvoicesData.invoiceIssueDate}}</td>
                                                            <td class="text-center" style="" [ngClass]="{
                                                            'text-success': selectedInvoicesData.paymentStatus == 'Paid',
                                                            'text-warning': selectedInvoicesData.paymentStatus == 'Draft',                                           
                                                            'text-danger':selectedInvoicesData.paymentStatus == 'Unpaid',
                                                            'text-info': selectedInvoicesData.paymentStatus == 'Overdue'                                            
                                                            }">{{selectedInvoicesData.paymentStatus}}</td>
                                                            <td class="menu text-center text-info"
                                                                style="padding: 0px;">
                                                                <button mat-icon-button [matMenuTriggerFor]="menu"
                                                                    aria-label="Example icon-button with a menu">
                                                                    <mat-icon>more_vert</mat-icon>
                                                                </button>
                                                                <mat-menu #menu="matMenu" class="menudata">

                                                                    <button mat-menu-item class="menuItembtn"
                                                                        (click)="openViewModal(viewContent,selectedInvoicesData)">
                                                                        <span>View Details</span>
                                                                    </button>
                                                                    <ng-template #viewContent let-modal>
                                                                        <div class="modal-header p-2 px-4  justify-content-between"
                                                                            style="background-color: rgb(82, 192, 211);color: white;">
                                                                            <h5 class="modal-title justify-content-center" style="font-size: 14px;font-weight: 600;" id="modal-basic-title">
                                                                                Invoice Details</h5>
                                                                            <div style="text-align: end;">
                                                                                <img src="../../../assets/images/ui/Icons/1x/ic_pdf.png" width="15%" (click)="modal.close('Close click')"
                                                                                    class="handCursor pt-0 px-1">
                                                                                <img src="../../../assets/images/ui/Icons/1x/ic_print.png" width="18%" (click)="modal.close('Close click')"
                                                                                    class="handCursor pt-0 px-1">
                                                                                <img src="../../../assets/images/ui/Icons/patient-medical-module/Icon material-cancel@2x.png" width="20%"
                                                                                    (click)="modal.close('Close click')" class="handCursor pt-0 px-1">
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-body bg-white p-2 ">
                                                                            <div style="border: 1px solid rgb(200, 200, 200);">
                                                                                <div class="headerPart p-2 justify-content-between d-flex">
                                                                                    <div class="p-0"> <span style="font-size: 13px;font-weight: 600;">Invoice # {{selectedInvoicesData.invoiceNumber}}</span></div>
                                                                                    <div class="p-0"><span style="font-size: 13px;font-weight: 600;">SpectroCare</span></div>
                                                                                </div>
                                                                                <div class="row" style="padding: 18px;">
                                                                                    <div class="col-3">
                                                                                        <div class="" style="font-size: 12px;font-weight: 600;margin-bottom: 7px;">Invoice Date</div>
                                                                                        <div class="" style="font-size: 12px;font-weight: 500;">{{selectedInvoicesData.invoiceIssueDate}}</div>
                                                                                    </div>
                                                                                    <div class="col-3">
                                                                                        <div class="" style="font-size: 12px;font-weight: 600;margin-bottom: 7px;">Payment Due Date</div>
                                                                                        <div class="" style="font-size: 12px;font-weight: 500;">{{selectedInvoicesData.invoicePaymentDueDate}}</div>
                                                                                    </div>
                                                                                    <div class="col-3">
                                                                                        <div class="" style="font-size: 12px;font-weight: 600;text-align: center;margin-bottom: 7px;">Status</div>
                                                                                        <div class="" style="font-size: 12px;font-weight: 600;border: 1px solid black;
                                                                                        width: 40%;text-align: center;line-height: 2;margin: auto;width: auto;">{{selectedInvoicesData.paymentStatus}}</div>
                                                                                    </div>
                                                                                    <div class="col-3">
                                                                                    </div>
                                                                                </div>
                                                                    
                                                                                <div class="mx-2 my-2" style="border-bottom: 1px solid black ;"></div>
                                                                    
                                                                                <div class="row " style="padding: 18px;">
                                                                                    <div class="col-6">
                                                                                        <div>
                                                                                            <span style="font-size: 12px;font-weight: 600;">Bill To &nbsp;&nbsp;:&nbsp;&nbsp; </span>
                                                                                            <span style="font-size: 12px;font-weight: 500;">{{selectedInvoicesData.clientDetails.name}}</span>
                                                                                        </div>
                                                                                        <span style="font-size: 12px;font-weight: 500;">{{selectedInvoicesData.clientDetails.address}}</span>
                                                                    
                                                                                    </div>
                                                                                    <div class="col-6">
                                                                                        <div>
                                                                                            <span style="font-size: 12px;font-weight: 600;">Send From &nbsp;&nbsp;:&nbsp;&nbsp; </span>
                                                                                            <span style="font-size: 12px;font-weight: 500;">{{selectedInvoicesData.tracking[0].byWhomName}}</span>
                                                                                        </div>
                                                                                        <span style="font-size: 12px;font-weight: 500;">{{selectedInvoicesData.tracking[0].byWhomID}}</span>
                                                                    
                                                                                    </div>
                                                                                </div>
                                                                    
                                                                                <div class="mx-2 my-2" style="border-bottom: 1px solid black ;"></div>
                                                                    
                                                                                <div class="mx-3">
                                                                    
                                                                                    <div class="row" style="padding: 5px;justify-content: center;">
                                                                                        <div class="col-1" style="height: 33px;line-height: 1; font-weight: 600;
                                                                                        text-align: center;color: white;background-color: rgb(53, 54, 53);
                                                                                        border-radius: 5px;margin-right: 2px;padding:5px">
                                                                                        <span class=" headText tableData" style="font-weight: 600;">No</span>
                                                                                        </div>
                                                                                        <div class="col-3 modelBodyHead " style="height: 33px;line-height: 1;
                                                                                        text-align: center;color: white;background-color: rgb(53, 54, 53);
                                                                                        border-radius: 5px;margin-right: 2px;padding:5px">
                                                                                            <span class=" headText tableData" style="font-weight: 600;">Item</span>
                                                                                        </div>
                                                                                        <div class="col-2 modelBodyHead " style="height: 33px;line-height: 1;
                                                                                        text-align: center;color: white;background-color: rgb(53, 54, 53);
                                                                                        border-radius: 5px;margin-right: 2px;padding:5px">
                                                                                            <span class="headText tableData" style="font-weight: 600;">Cost</span>
                                                                                        </div>
                                                                                        <div class="col-1 modelBodyHead " style="height: 33px;line-height: 1;
                                                                                        text-align: center;color: white;background-color: rgb(53, 54, 53);
                                                                                        border-radius: 5px;margin-right: 2px;padding:5px">
                                                                                            <span class="headText tableData" style="font-weight: 600;">Unit</span>
                                                                                        </div>
                                                                                        <div class="col-2 modelBodyHead " style="height: 33px;line-height: 1;
                                                                                        text-align: center;color: white;background-color: rgb(53, 54, 53);
                                                                                        border-radius: 5px;margin-right: 2px;padding:5px">
                                                                                            <span class="headText tableData" style="font-weight: 600;">VAT</span>
                                                                                        </div>
                                                                                        <div class="col-2 modelBodyHead " style="height: 33px;line-height: 1;
                                                                                        text-align: center;color: white;background-color: rgb(53, 54, 53);
                                                                                        border-radius: 5px;padding:5px">
                                                                                            <span class="headText tableData" style="font-weight: 600;">Amount</span>
                                                                                        </div>
                                                                                        <div class="col-1"></div>
                                                                                    </div>
                                                                                    <form [formGroup]="viewServiceForm">
                                                                    
                                                                                        <div formArrayName="viewServiceHistory" class="scrollService"
                                                                                            style="flex-flow:inherit; height: 120px !important;">
                                                                                            <div *ngFor="let desease of mainServiceData; let i =index">
                                                                    
                                                                                                <div class="form-group row " style="padding: 5px;justify-content: center;margin-bottom: 0px;"
                                                                                                    > <!--padding: 5px;justify-content: center;-->
                                                                                                    <div class="col-1 tableData" style="border: 1px solid #ced4da;border-radius: 5px;height: 30px;
                                                                                                    padding:5px;
                                                                                                    text-align: center;margin-right: 2px;margin-top: 5px;">
                                                                                                        {{i+1}}.
                                                                                                    </div>
                                                                                                    <div class="col-3 " style="padding:5px;margin-right: 2px;">
                                                                                                        <input type="text" value="{{desease.serviceName}}"
                                                                                                            style="border-radius: 5px;  height: 30px;background-color: white;"
                                                                                                            class=" form-control tableData " readonly>
                                                                                                    </div>
                                                                                                    <div class="col-2 " style="padding:5px;margin-right: 2px;">
                                                                                                        <input type="number" value="{{desease.cost}}"
                                                                                                            style="border-radius: 5px;  height: 30px;text-align: center;background-color: white;"
                                                                                                            class=" form-control tableData " readonly>
                                                                                                    </div>
                                                                                                    <div class="col-1 " style="padding:5px;margin-right: 2px;">
                                                                                                        <input type="number" value="{{desease.units}}"
                                                                                                            style="border-radius: 5px;  height: 30px;text-align: center;background-color: white;"
                                                                                                            class=" form-control tableData " readonly>
                                                                                                    </div>
                                                                                                    <div class="col-2 " style="padding:5px;margin-right: 2px;">
                                                                                                        <input type="number" value="{{desease.vat}}"
                                                                                                            style="border-radius: 5px;  height: 30px;text-align: center;background-color: white;"
                                                                                                            class=" form-control tableData " readonly>
                                                                                                    </div>
                                                                                                    <div class="col-2 " style="padding:5px;margin-right: 2px;">
                                                                                                        <input type="number" value="{{desease.amount}}" readonly
                                                                                                            style="border-radius: 5px;  height: 30px;text-align: center;background-color: white;"
                                                                                                            class=" form-control tableData ">
                                                                                                    </div>
                                                                                                    <div class="col-1"></div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </form>
                                                                                    <div class="pr-4" style="text-align: end;">
                                                                                        <div class="">
                                                                                            <span style="font-size: 13px; font-weight: 600;">Sub total : <span
                                                                                                    style="font-size: 13px; font-weight: 600; margin-right: 3px;">&#36;</span>{{selectedInvoicesData.subTotal}}</span>
                                                                                        </div>
                                                                                        <div class="">
                                                                                            <span style="font-size: 13px; font-weight: 600;">Vat : <span
                                                                                                    style="font-size: 13px;font-weight: 600; margin-right: 3px;">&#36;</span>{{selectedInvoicesData.VAT}}</span>
                                                                                        </div>
                                                                                        <div class="">
                                                                                            <span style="font-size: 13px; font-weight: 600;">Total Amount: <span
                                                                                                    style="font-size: 13px;font-weight: 600; margin-right: 3px;">&#36;</span>{{selectedInvoicesData.totalAmount}}</span>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    
                                                                        <div class="modal-footer justify-content-center p-1" style="border-top: transparent;">
                                                                            <button class="btn w-25 btn-sm mouse  mr-4 text-dark " (click)="openEditModal(editContent,selectedInvoicesData)"
                                                                                style="border: 1px solid black; width: 20%;">Edit Invoice</button>
                                                                            <button class="btn w-25 btn-sm mouse text-white mr-4 " (click)="openSendInvoiceModal(sendInvoiceContent,selectedInvoicesData)"
                                                                                style="background-color:rgb(82, 192, 211) ;width: 30% !important;">Send to Client
                                                                            </button>
                                                                            <ng-template #sendInvoiceContent let-modal>
                                                                                <div class="modal-body bg-white p-2 ">
                                                                                    <div class="d-flex p-1">
                                                                                        <div class="col-md-4 text-center p-3 m-0">
                                                                                            <img src="../../../assets/images/ui/Icons/1x/send.png" style="width: 80%; margin-top: 10px;">
                                                                                        </div>
                                                                                        <div class="col-md-8 p-2">
                                                                                            <h5 class="" style="text-align: center;
                                                                                            font-weight: 600;">
                                                                                                Send Invoice
                                                                                            </h5><br>
                                                                                            <span class="text-muted">Want to send this invoice to {{selectedInvoicesData.clientDetails.name}} via {{selectedInvoicesData.clientDetails.emailID}}
                                                                                            </span>
                                                                                            <div class="row justify-content-center " style="margin-top: 10px;">
                                                                            
                                                                                                <button class="btn btn-sm bg-white mouse  mr-4" style="border: 1px solid #b6b3b3; width: 25%;"
                                                                                                    (click)="modal.close('Close click')">Cancel</button>
                                                                                                <button class="btn btn-sm btn-info mouse" style=" width: 25%;" (click)="sendInvoiceToClient(selectedInvoicesData)">Send</button>
                                                                            
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </ng-template>
                                                                        </div>
                                                                    </ng-template>

                                                                    <button mat-menu-item
                                                                        (click)="openEditModal(editContent,selectedInvoicesData)">
                                                                        <span>Edit Invoice</span>
                                                                    </button>

                                                                    <button mat-menu-item
                                                                        (click)="openDeleteModal(deleteContent,selectedInvoicesData)">
                                                                        <span>Delete Invoice</span>
                                                                    </button>

                                                                    <ng-template #deleteContent let-modal>
                                                                        <div class="modal-body bg-white p-2 ">
                                                                            <div class="d-flex p-1">
                                                                                <div class="col-md-4 text-center p-3 m-0">
                                                                                    <img src="../../../assets/images/ui/Icons/1x/delete_1.png" style="width: 80%; margin-top: 10px;">
                                                                                </div>
                                                                                <div class="col-md-8 p-2">
                                                                                    <h5 class="" style="text-align: center;
                                                                                    font-weight: 600;">
                                                                                        Delete Invoice
                                                                                    </h5><br>
                                                                                    <span class="text-muted">Are you sure you want to delete this invoice ?
                                                                                    </span>
                                                                                    <div class="row justify-content-center " style="margin-top: 10px;">
                                                                    
                                                                                        <button class="btn btn-sm bg-white mouse  mr-4" style="border: 1px solid #b6b3b3; width: 25%;"
                                                                                            (click)="modal.close('Close click')">Cancel</button>
                                                                                        <button class="btn btn-sm btn-info mouse" style=" width: 25%;" 
                                                                                        (click)="deleteInvoiceMethod(selectedInvoicesData)">Send</button>
                                                                    
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </ng-template>

                                                                    <button mat-menu-item
                                                                        (click)="openSendReminderModal(sendReminderContent,selectedInvoicesData)">
                                                                        <span>Send Reminders</span>
                                                                    </button>
                                                                    <ng-template #sendReminderContent let-modal>
                                                                        <div class="modal-body bg-white p-2 ">
                                                                            <div class="d-flex p-1">
                                                                                <div class="col-md-4 text-center p-3 m-0">
                                                                                    <img src="../../../assets/images/ui/Icons/1x/alarm.png" style="width: 80%; margin-top: 10px;">
                                                                                </div>
                                                                                <div class="col-md-8 p-2">
                                                                                    <h5 class="" style="text-align: center;
                                                                                    font-weight: 600;">
                                                                                        Send Reminder
                                                                                    </h5><br>
                                                                                    <span class="text-muted">You are about to send reminder to {{selectedInvoicesData.clientDetails.name}} via {{selectedInvoicesData.clientDetails.emailID}}
                                                                                    </span>
                                                                                    <div class="row justify-content-center " style="margin-top: 10px;">
                                                                    
                                                                                        <button class="btn btn-sm bg-white mouse  mr-4" style="border: 1px solid #b6b3b3; width: 25%;"
                                                                                            (click)="modal.close('Close click')">Cancel</button>
                                                                                        <button class="btn btn-sm btn-info mouse" style=" width: 25%;" (click)="sendReminderToClient(selectedInvoicesData)">Send</button>
                                                                    
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </ng-template>

                                                                </mat-menu>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </mat-tab>
                <mat-tab label="Payment Transactions" > <!--(click)="callPaymentTransactions()" [routerLink]="['/admincenter/paymentTransactions']"-->
                    <app-payment-transactions></app-payment-transactions>
                </mat-tab>
                <mat-tab label="Device Usage Report">
                    Device Usage Reports
                </mat-tab>
            </mat-tab-group>
        </div>
    </div>
</div>

<ng-template #viewCreateInvoiceContent let-modal>

    <div class="modal-header p-2 px-4  justify-content-between"
        style="background-color: rgb(82, 192, 211);color: white;">
        <h5 class="modal-title justify-content-center" style="font-size: 14px; font-weight: 600;"
            id="modal-basic-title">Create New Invoice</h5>
        <mat-icon class="handCursor" (click)="modal.close('Close click')">cancel</mat-icon>
    </div>
    <div class="modal-body bg-white p-2 ">
        <div class="container">
            <div class="row mb-1 justify-content-around partOne" >
                <div class="col-md-6 firstPart">
                    <div class="card" style="width: 23rem; height: 14rem;">
                        <div class="card-header p-2" style="font-size: 13px; font-weight: 600;">Client</div>
                        <div class="card-body mx-2 pt-1">
                            <form [formGroup]="selectPatientForm">
                                <div class="pb-2">
                                    <div class="row">
                                        <span style="font-size: 13px; font-weight: 600;">Bill to : </span>
                                    </div>
                                    <div class="row">
                                        <input type="text"
                                            style="border-radius: 5px;height: 30px; background-color: white;font-size: 12px;font-weight: 500;"
                                            formControlName="patientName" readonly class="form-control read ">
                                        <div class="calenderLogo">
                                            <button style="outline-style: none;"
                                                (click)="openPatientMethod(patientsModel)" class="p-0 btn calendar"
                                                type="button">
                                                <i class="fas fa-search" aria-hidden="true"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="row" style="height: 34px;">
                                    <div class="col-4 justify-content-between" style="margin-right: inherit;">
                                        <span class="mr-4" style="font-size: 13px; font-weight: 600;">Email</span>
                                        <span>:</span>
                                    </div>
                                    <div class="col-8" style="margin-right: inherit;margin-left: -30px;">
                                        <input style="border: none; height: 30px;font-size: 12px;font-weight: 500;"
                                            class="w-100 form-control bg-white" formControlName="emailID" readonly>
                                    </div>
                                </div>
                                <div class="row" style="height: 34px;">
                                    <div class="col-4 justify-content-between" style="margin-right: inherit;">
                                        <span class="mr-3" style="font-size: 13px; font-weight: 600;">Phone</span>
                                        <span>:</span>
                                    </div>
                                    <div class="col-8" style="margin-right: inherit;margin-left: -30px;">
                                        <input style="border: none; height: 30px;font-size: 12px;font-weight: 500;"
                                            class="w-100 form-control bg-white" formControlName="phoneNumber" readonly>
                                    </div>
                                </div>
                                <div class="row" style="height: 34px;">
                                    <div class="col-4 justify-content-between" style="margin-right: inherit;">
                                        <span class="mr-1" style="font-size: 13px; font-weight: 600;">Address</span>
                                        <span>:</span>
                                    </div>
                                    <div class="col-8" style="margin-right: inherit;margin-left: -30px;">
                                        <input style="border: none; height: 30px;font-size: 12px;font-weight: 500;"
                                            class="w-100 form-control bg-white" formControlName="address" readonly>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 seconPart" >
                    <div class="card " style="width: 23rem; height: 14rem; ">
                        <div class="card-header p-2" style="font-size: 13px; font-weight: 600;">Invoice</div>
                        <div class="card-body mx-2 pt-0">
                            <form [formGroup]="selectDatesForm">
                                <div class="">
                                    <div class="row">
                                        <span style="font-size: 13px; font-weight: 600;">Invoice #</span>
                                    </div>
                                    <div class="row">
                                        <input type="text"
                                            style="border-radius: 5px; height: 30px;font-size: 12px;font-weight: 500;"
                                            class=" form-control " formControlName="invoiceNumber">
                                    </div>
                                </div>
                                <div class="p-1">
                                    <div class="row">
                                        <span style="font-size: 13px; font-weight: 600;">Invoice Date</span>
                                    </div>
                                    <div class="row">
                                        <input
                                            style="border-radius: 5px; height: 30px;font-size: 12px;font-weight: 500;"
                                            class="w-100 form-control bg-white" ngbDatepicker #d="ngbDatepicker"
                                            formControlName="invoiceDate" readonly>
                                        <div class="calenderLogo">
                                            <button style="outline-style: none;" class="p-0 btn  calendar"
                                                (click)="d.toggle()" type="button">
                                                <i class="fas fa-calendar-alt" aria-hidden="true"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="p-1">
                                    <div class="row">
                                        <span style="font-size: 13px; font-weight: 600;">Payment Due Date</span>
                                    </div>
                                    <div class="row">
                                        <input
                                            style="line-height: 1; height: 30px; border-radius: 5px; font-size: 12px;font-weight: 500;"
                                            class="w-100 form-control bg-white" ngbDatepicker #d1="ngbDatepicker"
                                            formControlName="paymentDueDate" readonly>
                                        <div class="calenderLogo">
                                            <button style="outline-style: none;" class="p-0 btn  calendar "
                                                (click)="d1.toggle()" type="button">
                                                <i class="fas fa-calendar-alt" aria-hidden="true"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="row p-2 m-0 justify-content-between" style="background-color:#f7f7f7">
                            <span style="font-size: 13px; font-weight: 600;">Service</span>
                            <mat-icon class="handCursor" (click)="addService()">add_circle_outline</mat-icon>
                        </div>

                        <form [formGroup]="addServiceForm" class="">
                            <!-- <div class="row" style="margin: auto;padding: 5px;padding-left: 25px;">
                                <div class="col-1" style="height: 33px;line-height: 1; font-weight: 600;
                                text-align: center;color: white;
                                background-color: rgb(53, 54, 53);
                                border-radius: 5px;margin-right: 2px;padding:5px">
                                <span class=" headText tableData" style="font-weight: 600;">No</span>
                                </div>
                                <div class="col-3 modelBodyHead" style="height: 33px;line-height: 1;
                                font-weight: 600;text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;margin-right: 2px;padding:5px;">
                                    <span class=" headText tableData" style="font-weight: 600;">Item</span>
                                </div>
                                <div class="col-2 modelBodyHead " style="height: 33px;line-height: 1;
                                font-weight: 600;text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;margin-right: 2px;padding:5px;">
                                    <span class="headText tableData" style="font-weight: 600;">Cost</span>
                                </div>
                                <div class="col-1 modelBodyHead " style="height: 33px;line-height: 1;
                                font-weight: 600;text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;margin-right: 2px;padding:5px;">
                                    <span class="headText tableData" style="font-weight: 600;">Unit</span>
                                </div>
                                <div class="col-2 modelBodyHead " style="height: 33px;line-height: 1;
                                font-weight: 600;text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;margin-right: 2px;padding-top: inherit;">
                                    <span class="headText tableData" style="font-weight: 600;">VAT</span>
                                </div>
                                <div class="col-2 modelBodyHead " style="height: 33px;line-height: 1;
                                font-weight: 600;text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;padding-top: inherit;">
                                    <span class="headText tableData" style="font-weight: 600;">Amount</span>
                                </div>
                                <div class="col-1"></div>
                            </div> -->
                            <div class="row" style="padding: 5px;padding-left: 25px;">
                                <div class="col-1" style="height: 33px;line-height: 1; font-weight: 600;
                                text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;margin-right: 2px;padding:5px">
                                <span class=" headText tableData" style="font-weight: 600;">No</span>
                                </div>
                                <div class="col-3 modelBodyHead " style="height: 33px;line-height: 1;
                                text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;margin-right: 2px;padding:5px">
                                    <span class=" headText tableData" style="font-weight: 600;">Item</span>
                                </div>
                                <div class="col-2 modelBodyHead " style="height: 33px;line-height: 1;
                                text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;margin-right: 2px;padding:5px">
                                    <span class="headText tableData" style="font-weight: 600;">Cost</span>
                                </div>
                                <div class="col-1 modelBodyHead " style="height: 33px;line-height: 1;
                                text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;margin-right: 2px;padding:5px">
                                    <span class="headText tableData" style="font-weight: 600;">Unit</span>
                                </div>
                                <div class="col-2 modelBodyHead " style="height: 33px;line-height: 1;
                                text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;margin-right: 2px;padding:5px">
                                    <span class="headText tableData" style="font-weight: 600;">VAT</span>
                                </div>
                                <div class="col-2 modelBodyHead " style="height: 33px;line-height: 1;
                                text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;padding:5px">
                                    <span class="headText tableData" style="font-weight: 600;">Amount</span>
                                </div>
                                <div class="col-1"></div>
                            </div>
                            <div formArrayName="serviceHistory" class="scrollService"
                                style="flex-flow:inherit; height: 120px !important;">
                                <ng-container *ngFor="let desease of serviceData.controls; let i =index">

                                    <div class="form-group row " style="padding-left: 25px;margin-bottom: 0px;"
                                        [formGroupName]="i">
                                        <div class="col-1 tableData" style="border: 1px solid #ced4da;border-radius: 5px;height: 30px;
                                            padding:5px;text-align: center;margin-right: 2px;margin-top: 5px;">
                                            {{i+1}}.
                                        </div>
                                        <div class="col-3"  
                                        style="padding:5px;margin-right: 2px;">
                                            <input type="text" formControlName="serviceName"
                                                style="border-radius: 5px;  height: 30px;background-color: white !important;"
                                                class=" form-control handCursor tableData" readonly>
                                            <div class="searchIcon" style="margin-top: -28px;">
                                                <button style="outline-style: none;" (click)="openServiceMethod(serviceModel,i)"
                                                     class="p-0 btn calendar"
                                                    type="button">
                                                    <i class="fas fa-search" aria-hidden="true"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="col-2" style="padding: 5px;margin-right: 2px;">
                                            <input type="number" formControlName="cost"
                                                
                                                style="border-radius: 5px;  height: 30px;text-align: center;"
                                                class=" form-control  tableData">
                                            <!--(input)="onSearchChange($event.target.value)"
                                                 <div class="" style="margin-left: 40px;margin-top: -28px;">
                                                    <span style="font-size: 12px;font-weight: 600;">&#36;</span>
                                                </div> -->
                                        </div>
                                        <div class="col-1" style="padding: 5px;margin-right: 2px;">
                                            <input type="number" formControlName="units"
                                                (input)="onSearchChange1($event.target.value)"
                                                style="border-radius: 5px; height: 30px;text-align: center;"
                                                class=" form-control  tableData ">
                                        </div>
                                        <div class="col-2" style="padding: 5px;margin-right: 2px;">
                                            <input type="number" formControlName="vat"
                                                style="border-radius: 5px;  height: 30px;text-align: center;"
                                                class=" form-control  tableData ">
                                        </div>
                                        <div class="col-2" style="padding: 5px;margin-right: 2px;">
                                            <input type="number" formControlName="amount" readonly
                                                style="border-radius: 5px;  height: 30px;text-align: center;background-color: white;"
                                                class=" form-control  tableData ">
                                        </div>
                                        <div class="col-1" style="margin-top: 10px;margin-left: -14px;"
                                            (click)="removeService(i)">
                                            <img src="../../../assets/images/ui/Icons/patient-medical-module/Icon metro-cancel.png"
                                                style="margin-top: -9px;" width="22rem" class="handCursor">
                                        </div>
                                    </div>
                                </ng-container>
                            </div>
                        </form>

                        <div class="pr-4" style="text-align: end;border-top:1px solid rgb(200, 200, 200);">
                            <div class="">
                                <span style="font-size: 13px; font-weight: 600;">Sub total : <span
                                        style="font-size: 13px; font-weight: 600; margin-right: 3px;">&#36;</span>{{subTotalAmount}}</span>
                            </div>
                            <div class="">
                                <span style="font-size: 13px; font-weight: 600;">Vat :
                                    <span style="font-weight: 600; margin-right: 3px;">&#36;</span>{{vat}}</span>
                            </div>
                            <div class="">
                                <span style="font-size: 13px; font-weight: 600;">Total Amount: <span
                                        style="font-weight: 600; margin-right: 3px;">&#36;</span>{{totalAmount}}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer justify-content-center p-1" style="border-top: transparent;">
        <button class="btn  btn-sm mouse  mr-4 text-dark " (click)="modal.close('Close click')"
            style="border: 1px solid black; width: 20%;">Save Draft</button>
        <button class="btn  btn-sm mouse text-white mr-4 " style="background-color:rgb(82, 192, 211) ;width: 17%;"
            (click)="addInvoiceSubmit()">Create</button>
    </div>
</ng-template>



<ng-template #editContent let-modal>
    <div class="modal-header p-2 px-4  justify-content-between"
        style="background-color: rgb(82, 192, 211);color: white;">
        <h5 class="modal-title justify-content-center" style="font-size: 14px; font-weight: 600;"
            id="modal-basic-title">Edit Invoice</h5>
        <mat-icon class="handCursor" (click)="modal.close('Close click')">cancel</mat-icon>
    </div>
    <div class="modal-body bg-white p-2 ">
        <div class="container">
            <div class="row mb-1 justify-content-around partOne">
                <div class="col-md-6 firstPart">
                    <div class="card" style="width: 23rem; height: 14rem;">
                        <div class="card-header p-2" style="font-size: 13px; font-weight: 600;">Client</div>
                        <div class="card-body mx-2 pt-1">
                            <form [formGroup]="editSelectPatientForm">
                                <div class="pb-2">
                                    <div class="row">
                                        <span style="font-size: 13px; font-weight: 600;">Bill to : </span>
                                    </div>
                                    <div class="row">
                                        <input type="text"
                                            style="border-radius: 5px;height: 30px; background-color: white;font-size: 12px;font-weight: 500;"
                                            formControlName="patientName" readonly class="form-control read ">
                                        <div class="calenderLogo">
                                            <button style="outline-style: none;"
                                                (click)="openPatientMethod(patientsModel)" class="p-0 btn calendar"
                                                type="button">
                                                <i class="fas fa-search" aria-hidden="true"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="row" style="height: 34px;">
                                    <div class="col-4 justify-content-between" style="margin-right: inherit;">
                                        <span class="mr-4" style="font-size: 13px; font-weight: 600;">Email</span>
                                        <span>:</span>
                                    </div>
                                    <div class="col-8" style="margin-right: inherit;margin-left: -30px;">
                                        <input style="border: none; height: 30px;font-size: 12px;font-weight: 500;"
                                            class="w-100 form-control bg-white" formControlName="emailID" readonly>
                                    </div>
                                </div>
                                <div class="row" style="height: 34px;">
                                    <div class="col-4 justify-content-between" style="margin-right: inherit;">
                                        <span class="mr-3" style="font-size: 13px; font-weight: 600;">Phone</span>
                                        <span>:</span>
                                    </div>
                                    <div class="col-8" style="margin-right: inherit;margin-left: -30px;">
                                        <input style="border: none; height: 30px;font-size: 12px;font-weight: 500;"
                                            class="w-100 form-control bg-white" formControlName="phoneNumber" readonly>
                                    </div>
                                </div>
                                <div class="row" style="height: 34px;">
                                    <div class="col-4 justify-content-between" style="margin-right: inherit;">
                                        <span class="mr-1" style="font-size: 13px; font-weight: 600;">Address</span>
                                        <span>:</span>
                                    </div>
                                    <div class="col-8" style="margin-right: inherit;margin-left: -30px;">
                                        <input style="border: none; height: 30px;font-size: 12px;font-weight: 500;"
                                            class="w-100 form-control bg-white" formControlName="address" readonly>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 secondPart" > <!--style="padding-left: 0px;"-->
                    <div class="card " style="width: 23rem; height: 14rem; ">
                        <div class="card-header p-2" style="font-size: 13px; font-weight: 600;">Invoice</div>
                        <div class="card-body mx-2 pt-0">
                            <form [formGroup]="editSelectDatesForm">
                                <div class="">
                                    <div class="row">
                                        <span style="font-size: 13px; font-weight: 600;">Invoice #</span>
                                    </div>
                                    <div class="row">
                                        <input type="text"
                                            style="border-radius: 5px; height: 30px;font-size: 12px;font-weight: 500;"
                                            class=" form-control " formControlName="invoiceNumber" >
                                    </div>
                                </div>
                                <div class="p-1">
                                    <div class="row">
                                        <span style="font-size: 13px; font-weight: 600;">Invoice Date</span>
                                    </div>
                                    <div class="row">
                                        <input
                                            style="border-radius: 5px; height: 30px;font-size: 12px;font-weight: 500;"
                                            class="w-100 form-control bg-white" ngbDatepicker #d="ngbDatepicker"
                                            [value]="dateToShow" formControlName="invoiceDate" >
                                        <div class="calenderLogo">
                                            <button style="outline-style: none;" class="p-0 btn  calendar"
                                                (click)="d.toggle()" type="button">
                                                <i class="fas fa-calendar-alt" aria-hidden="true"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="p-1">
                                    <div class="row">
                                        <span style="font-size: 13px; font-weight: 600;">Payment Due Date</span>
                                    </div>
                                    <div class="row">
                                        <input
                                            style="line-height: 1; height: 30px; border-radius: 5px; font-size: 12px;font-weight: 500;"
                                            class="w-100 form-control bg-white" ngbDatepicker #d1="ngbDatepicker"
                                            [value]="dateToShow2" formControlName="paymentDueDate" >
                                        <div class="calenderLogo">
                                            <button style="outline-style: none;" class="p-0 btn  calendar "
                                                (click)="d1.toggle()" type="button">
                                                <i class="fas fa-calendar-alt" aria-hidden="true"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="row p-2 m-0 justify-content-between" style="background-color:#f7f7f7">
                            <span style="font-size: 13px; font-weight: 600;">Service</span>
                            <mat-icon class="handCursor" (click)="editViewService()">add_circle_outline</mat-icon>
                        </div>

                        <form [formGroup]="editServiceForm">
                            <!-- <div class="row" style="margin: auto;padding: 5px;padding-left: 25px;">
                                <div class="col-1" style="height: 33px; font-size: 14px;font-weight: 600;text-align: center;color: white;
                                background-color: rgb(53, 54, 53);
                                border-radius: 5px;margin-right: 2px;padding-top: inherit;">No</div>
                                <div class="col-3 modelBodyHead" style="height: 33px;font-size: 14px;
                                font-weight: 600;text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;margin-right: 2px;padding-top: inherit;">
                                    <span class=" headText" style="font-size: 14px;font-weight: 600;">Item</span>
                                </div>
                                <div class="col-2 modelBodyHead " style="height: 33px;font-size: 14px;
                                font-weight: 600;text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;margin-right: 2px;padding-top: inherit;">
                                    <span class="headText" style="font-size: 14px;font-weight: 600;">Cost</span>
                                </div>
                                <div class="col-1 modelBodyHead " style="height: 33px;font-size: 14px;
                                font-weight: 600;text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;margin-right: 2px;padding-top: inherit;">
                                    <span class="headText" style="font-size: 14px;font-weight: 600;">Unit</span>
                                </div>
                                <div class="col-2 modelBodyHead " style="height: 33px;font-size: 14px;
                                font-weight: 600;text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;margin-right: 2px;padding-top: inherit;">
                                    <span class="headText" style="font-size: 14px;font-weight: 600;">VAT</span>
                                </div>
                                <div class="col-2 modelBodyHead " style="height: 33px;font-size: 14px;
                                font-weight: 600;text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;padding-top: inherit;">
                                    <span class="headText" style="font-size: 14px;font-weight: 600;">Amount</span>
                                </div>
                                <div class="col-1"></div>
                            </div> -->
                            <div class="row" style="padding: 5px;padding-left: 25px;">
                                <div class="col-1" style="height: 33px;line-height: 1; font-weight: 600;
                                text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;margin-right: 2px;padding:5px">
                                <span class=" headText tableData" style="font-weight: 600;">No</span>
                                </div>
                                <div class="col-3 modelBodyHead " style="height: 33px;line-height: 1;
                                text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;margin-right: 2px;padding:5px">
                                    <span class=" headText tableData" style="font-weight: 600;">Item</span>
                                </div>
                                <div class="col-2 modelBodyHead " style="height: 33px;line-height: 1;
                                text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;margin-right: 2px;padding:5px">
                                    <span class="headText tableData" style="font-weight: 600;">Cost</span>
                                </div>
                                <div class="col-1 modelBodyHead " style="height: 33px;line-height: 1;
                                text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;margin-right: 2px;padding:5px">
                                    <span class="headText tableData" style="font-weight: 600;">Unit</span>
                                </div>
                                <div class="col-2 modelBodyHead " style="height: 33px;line-height: 1;
                                text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;margin-right: 2px;padding:5px">
                                    <span class="headText tableData" style="font-weight: 600;">VAT</span>
                                </div>
                                <div class="col-2 modelBodyHead " style="height: 33px;line-height: 1;
                                text-align: center;color: white;background-color: rgb(53, 54, 53);
                                border-radius: 5px;padding:5px">
                                    <span class="headText tableData" style="font-weight: 600;">Amount</span>
                                </div>
                                <div class="col-1"></div>
                            </div>
                            <div formArrayName="editServiceHistory" class="scrollService"
                                style="flex-flow:inherit; height: 120px !important;">
                                <ng-container *ngFor="let desease of editServiceData.controls; let i =index">

                                    <div class="form-group row " style="padding-left: 25px;margin-bottom: 5px;"
                                        [formGroupName]="i">
                                        <div class="col-1" style="border: 1px solid #ced4da;border-radius: 5px;height: 30px;line-height: 2;
                                            font-size: 12px;text-align: center;margin-right: 5px;">
                                            {{i+1}}.
                                        </div>
                                        <div class="col-3" style="padding:unset;margin-right: 2px;">
                                            <input type="text" formControlName="serviceName"
                                                style="border-radius: 5px;  height: 30px;font-size: 12px;"
                                                class=" form-control  ">
                                            <div class="" style="margin-left: 150px;margin-top: -28px;">
                                                <button style="outline-style: none;"
                                                    (click)="openServiceMethod1(serviceModel1,i)" class="p-0 btn calendar"
                                                    type="button">
                                                    <i class="fas fa-search" aria-hidden="true"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="col-2" style="padding: unset;margin-right: 3px;">
                                            <input type="number" formControlName="cost"
                                                
                                                style="border-radius: 5px;  height: 30px;font-size: 12px;text-align: center;"
                                                class=" form-control  ">
                                                <!-- (input)="onSearchChange11($event.target.value)" -->
                                        </div>
                                        <div class="col-1" style="padding: unset;margin-right: 2px;">
                                            <input type="number" formControlName="units"
                                                (input)="onSearchChange12($event.target.value)"
                                                style="border-radius: 5px;  height: 30px;font-size: 12px;text-align: center;"
                                                class=" form-control  ">
                                        </div>
                                        <div class="col-2" style="padding: unset;margin-right: 2px;">
                                            <input type="number" formControlName="vat"
                                                style="border-radius: 5px;  height: 30px;font-size: 12px;text-align: center;"
                                                class=" form-control  ">
                                        </div>
                                        <div class="col-2" style="padding: unset;">
                                            <input type="number" formControlName="amount" readonly
                                                style="border-radius: 5px;  height: 30px;font-size: 12px;text-align: center;background-color: white;"
                                                class=" form-control  ">
                                        </div>
                                        <div class="col-1" style="margin-top: 6px;margin-left: -14px;"
                                            (click)="removeService1(i)">
                                            <img src="../../../assets/images/ui/Icons/patient-medical-module/Icon metro-cancel.png"
                                                style="margin-top: -9px;" width="20rem" class="handCursor">
                                        </div>
                                    </div>
                                </ng-container>
                            </div>
                        </form>

                        <div class="pr-4" style="text-align: end;border-top:1px solid rgb(200, 200, 200);">
                            <div class="">
                                <span style="font-size: 13px; font-weight: 600;">Sub total : <span
                                        style="font-size: 13px; font-weight: 600; margin-right: 3px;">&#36;</span>{{editSubTotalAmount}}</span>
                            </div>
                            <div class="">
                                <span style="font-size: 13px; font-weight: 600;">Vat :
                                    <span style="font-weight: 600; margin-right: 3px;">&#36;</span>{{editVat}}</span>
                            </div>
                            <div class="">
                                <span style="font-size: 13px; font-weight: 600;">Total Amount: <span
                                        style="font-weight: 600; margin-right: 3px;">&#36;</span>{{editTotalAmount}}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer justify-content-center p-1" style="border-top: transparent;">
        <button class="btn  btn-sm mouse text-white mr-4 " style="background-color:rgb(82, 192, 211) ;width: 17%;"
        (click)="updateInvoiceSubmit()">Save</button>
    </div>
</ng-template>



<!-- Open List Of Services Model -->
<ng-template #serviceModel let-modal>
    <div class="modal-header" style="background-color: #53B9C6;color: white;">
        <h5 class="modal-title justify-content-center" id="modal-basic-title">Add New Service</h5>
        <mat-icon (click)="modal.close('Close click')" class="handCursor">cancel</mat-icon>
    </div>
    <div class="modal-body bg-light p-0">
        <div class="row justify-content-center">
            <div class="">
                <div class="row p-3 justify-content-center">
                    <span class="font-weight-bold mr-2">Search by Service Name : </span>
                    <input class="px-2" type="text" name="searchTerm" (keyup)='searchService($event.target.value)'>
                </div>
                <div class="row scrollDoctor">
                    <table class="table text-center ">
                        <thead class="thead-dark ">
                            <tr class="medium" style="font-weight: normal;">

                                <th scope="col" style="font-size: 12px; font-weight: 600;">No</th>
                                <th scope="col" style="font-size: 12px; font-weight: 600;">FirstName</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let service of listOfServices; let i = index"
                                (click)="selectServiceFromList(service)" (click)="modal.close('Close click')"
                                style="cursor:pointer;">
                                <!--(click)="selectedRow = i"
                                    [class.highlighted]="i == selectedRow"-->
                                <td style="font-size: 12px; font-weight: 550;">{{i +1}}</td>
                                <td style="font-size: 12px; font-weight: 550;">{{service.serviceName}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</ng-template>

<!-- Open List Of Services Model -->
<ng-template #serviceModel1 let-modal>
    <div class="modal-header" style="background-color: #53B9C6;color: white;">
        <h5 class="modal-title justify-content-center" id="modal-basic-title">Add New Service</h5>
        <mat-icon (click)="modal.close('Close click')" class="handCursor">cancel</mat-icon>
    </div>
    <div class="modal-body bg-light p-0">
        <div class="row justify-content-center">
            <div class="">
                <div class="row p-3 justify-content-center">
                    <span class="font-weight-bold mr-2">Search by Service Name : </span>
                    <input class="px-2" type="text" name="searchTerm" (keyup)='searchService($event.target.value)'>
                </div>
                <div class="row scrollDoctor">
                    <table class="table text-center ">
                        <thead class="thead-dark ">
                            <tr class="medium" style="font-weight: normal;">

                                <th scope="col" style="font-size: 12px; font-weight: 600;">No</th>
                                <th scope="col" style="font-size: 12px; font-weight: 600;">FirstName</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let service of listOfServices; let i = index"
                                (click)="selectServiceFromList1(service)" (click)="modal.close('Close click')"
                                style="cursor:pointer;">
                                <!--(click)="selectedRow = i"
                                    [class.highlighted]="i == selectedRow"-->
                                <td style="font-size: 12px; font-weight: 550;">{{i +1}}</td>
                                <td style="font-size: 12px; font-weight: 550;">{{service.serviceName}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</ng-template>

<!-- Open List Of Patients Model -->
<ng-template #patientsModel let-modal>
    <div class="modal-header" style="background-color: #53B9C6;color: white;">
        <h5 class="modal-title justify-content-center" id="modal-basic-title">Select Patient</h5>
        <mat-icon (click)="modal.close('Close click')" class="handCursor">cancel</mat-icon>
    </div>
    <div class="modal-body bg-light p-0">
        <div class="row justify-content-center">
            <div class="">
                <div class="row p-3 justify-content-center">
                    <span class="font-weight-bold mr-2">Search by FirstName : </span>
                    <input class="px-2" type="text" name="searchTerm" (keyup)='searchDoctor($event.target.value)'>
                </div>
                <div class="row scrollDoctor">
                    <table class="table text-center ">
                        <thead class="thead-dark ">
                            <tr class="medium" style="font-weight: normal;">

                                <th scope="col" style="font-size: 12px; font-weight: 600;">No</th>
                                <th scope="col" style="font-size: 12px; font-weight: 600;">FirstName</th>
                                <th scope="col" style="font-size: 12px; font-weight: 600;">LastName</th>
                                <!-- <th scope="col">DoctorID</th> -->
                                <th scope="col" style="font-size: 12px; font-weight: 600;">Department</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let selectedPatient of patients; let i = index" (click)="selectedRow = i"
                                [class.highlighted]="i == selectedRow" (click)="selectPatientFromList(selectedPatient)"
                                (click)="modal.close('Close click')" style="cursor:pointer;">
                                <td style="font-size: 12px; font-weight: 550;">{{i +1}}</td>
                                <td style="font-size: 12px; font-weight: 550;">{{selectedPatient.firstName}}</td>
                                <td style="font-size: 12px; font-weight: 550;">{{selectedPatient.lastName}}</td>
                                <!-- <td>{{doctors.medical_personnel_id}}</td> -->
                                <td style="font-size: 12px; font-weight: 550;">{{selectedPatient.emailID}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</ng-template>