<div class="container">
    <div class="row" style="justify-content: space-between;padding: 5px;">
        <div style="font-size: 14px;font-weight: 600;">Doctor-Patient Interaction</div>
        <div>
            <img (click)="closeModel()" style="width: 1.5rem;"
                src="../../../../assets/images/ui/Icons/2x/cancel@2x.png">
        </div>
    </div>
    <div class="row" style="height: 80vh;">
        <div class="col-md-7">
            <video style="width: inherit;height: 75vh;" controls>
                <source src="" type="video/mp4">
                <source src="" type="video/ogg">
                Your browser does not support HTML video.
            </video>
        </div>
        <div class="col-md-4" style="padding: 0px !important;margin: 0px !important;">
            <div class="container">
                <div class="row" style="justify-content: space-around;">
                    <div class="col-md-3"
                        style="padding: 15px; border-radius: 50% !important;width: 50px;height: 50px;">
                        <img class=""
                            style=" border: 2px solid rgb(150, 211, 235);border-radius: 50%;width: 50px;height: 50px;min-width: 50px;min-height: 50px;"
                            src="{{baseURL+patient.patientDetails.profilePic}}"
                            onerror="this.src='../../../assets/images/ui/Icons/1x/profile-1.png';">
                    </div>
                    <div class="col-md-9" style="padding: 5px;">
                        <div>{{patient.patientDetails.firstName}} {{patient.patientDetails.lastName}}</div>
                        <div>{{patient.patientDetails.emailID}}</div>
                        <div>{{patient.patientDetails.age}} Yrs {{patient.patientDetails.phoneNumber.phoneNumber}}</div>
                    </div>
                </div>
            </div>
            <div *ngIf="viewGeneralInfo">
                <div class="row" style="justify-content: center;background: #F1F1F1;font-size: 14px;font-weight: bold;">
                    General Information
                </div>
                <div style="height: 22vh;" style="padding: 5px;">
                    <div class="row">
                        <div class="col-md-6">
                            <div style="font-size: 12px;font-weight: bold;">Patient ID</div>
                            <div style="font-size: 12px;font-weight: 500;">{{patient.patientDetails.patientID}}</div>
                        </div>
                        <div class="col-md-6">
                            <div style="font-size: 12px;font-weight: bold;">Date of Birth</div>
                            <div style="font-size: 12px;font-weight: 500;">
                                {{patient.patientDetails.dob | date:'dd/MM/yyyy'}}</div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div style="font-size: 12px;font-weight: bold;">Medical Record Number</div>
                            <div style="font-size: 12px;font-weight: 500;">{{patient.patientDetails.medical_record_id}}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div style="font-size: 12px;font-weight: bold;">Address</div>
                            <div style="font-size: 12px;font-weight: 500;">{{patient.patientDetails.address}}</div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12"></div>
                    </div>
                </div>
                <div class="row" style="justify-content: center;background: #F1F1F1;font-size: 14px;font-weight: bold;">
                    Family History
                </div>
                <div style="height: 15vh;"></div>
                <div class="row" style="justify-content: center;background: #F1F1F1;font-size: 14px;font-weight: bold;">
                    Allergies
                </div>
                <div style="height: 15vh;"></div>
            </div>
            <div *ngIf="viewPatientInfo">Patient Information</div>
            <div *ngIf="viewFiles">Files / Documents</div>
            <div *ngIf="viewChat">

                <div id="chat-message-list" class="scroll" #mainScroll>
                    <div *ngFor="let message of fetchedMessages; let i=index">
                        <div class="message-row you-message" *ngIf="message.userID === userID">
                            <div class="message-content">
                                <div style="display: flex;justify-self: normal;">
                                    <div class="messager-name">you</div>
                                    <div class="message-time">{{message.timeStamp | date: 'dd/MM/yyyy h:mm a'}}
                                    </div>
                                    <div class="menu text-center text-info" style="padding: 0px;margin-top: -12px;">
                                        <button mat-icon-button [matMenuTriggerFor]="menu"
                                            style="margin-left: -10px !important;">
                                            <img style="width: 0.2rem;"
                                                src="../../../assets/images/ui/Icons/1x/menu.png">
                                        </button>
                                        <mat-menu #menu="matMenu" xPosition="before" class="menudata">
                                            <button mat-menu-item (click)="editMessage(message)">
                                                <span>Edit</span>
                                            </button>
                                            <button mat-menu-item (click)="deleteMessage(message)">
                                                <span>Delete</span>
                                            </button>
                                        </mat-menu>
                                    </div>
                                </div>
                                <div class="message-text">{{message.message}}</div>
                            </div>
                        </div>

                        <div class="message-row other-message" *ngIf="message.userID !== userID">
                            <div class="message-content">
                                <div class="top-data">
                                    <div class="messager-name">patient</div>
                                    <div class="message-time">{{message.timeStamp | date: 'dd/MM/yyyy h:mm a'}}
                                    </div>
                                </div>
                                <div class="message-text">{{message.message}}</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id=chat-form>
                    <!-- <input type="text" placeholder="type message here" /> -->
                    <textarea rows="2" class="form-control" [(ngModel)]="message"
                        style="padding: 2px 0 2px 10px;border: none; resize: none;"
                        placeholder="type message here"></textarea>
                    <img style="width: 1rem;"
                        src="../../../../assets/images/ui/Medical-Personnel-Module/icons/Icon metro-attachment.png">
                    <img style="width: 1.3rem;margin-right: 10px;" (click)="sendChatMessages()"
                        src="../../../../assets/images/ui/Medical-Personnel-Module/icons/Icon ionic-ios-send.png">
                </div>
                <!-- <div class="">
                    <div class="" style="height: 50vh; max-height: 50vh;border: 1px solid gray;">
                        <div
                            style="text-align: left;border: 1px solid black;width: max-content;padding: 5px;float: left;margin: 5px;">
                            patient
                            message</div>
                        <div
                            style="text-align: right;border: 1px solid black;width: max-content;padding: 5px;float: right;margin: 5px;">
                            doctor
                            message</div>
                    </div>
                    <div class="" style="border: 1px solid gray;">
                        <div class="row" style="padding: 0px 0px 0px 15px;">
                            <textarea rows="2" style="padding: 2px 0 2px 10px;"></textarea>
                            <img style="width: 1.9rem;padding: 10px 12px 10px 5px;"
                                src="../../../../assets/images/ui/Medical-Personnel-Module/icons/Icon metro-attachment.png">
                            <img style="width: 2rem;padding: 10px 15px 10px 0px;"
                                src="../../../../assets/images/ui/Medical-Personnel-Module/icons/Icon ionic-ios-send.png">
                        </div>
                    </div>
                </div> -->
            </div>
        </div>
        <div class="col-md-1">
            <div
                style="text-align: center;background: #F5F8FA;display: flex;flex-direction: column;width: 80%;height: 100%;">
                <img [ngClass]="{ 'active' : isValue == 1 }" (click)="openGeneralInfo()"
                    style="cursor: pointer; width: 2.5rem;padding: 5px;margin: 5px 0px 5px 2px;"
                    src="../../../../assets/images/ui/Medical-Personnel-Module/icons/Icon-awesome-user-circle.png">
                <img [ngClass]="{ 'active' : isValue == 2 }" (click)="openPatientInfo()"
                    style="cursor: pointer;width: 2rem;padding: 5px;margin: 5px 0px 5px 8px;"
                    src="../../../../assets/images/ui/Medical-Personnel-Module/icons/Icon-awesome-file-alt.png">
                <img [ngClass]="{ 'active' : isValue == 3 }" (click)="openFile()"
                    style="cursor: pointer;width: 1.5rem;padding: 5px;margin: 5px 0px 5px 10px;"
                    src="../../../../assets/images/ui/Medical-Personnel-Module/icons/Icon material-attach-file.png">
                <img [ngClass]="{ 'active' : isValue == 4 }" (click)="openChat()"
                    style="cursor: pointer;width: 2.5rem;padding: 5px;margin: 5px;"
                    src="../../../../assets/images/ui/Medical-Personnel-Module/icons/chat.png">
            </div>
        </div>
    </div>
</div>