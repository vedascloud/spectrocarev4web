<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }"></ngx-loading>
<div class="container-fluid pb-2" style="background-color: #f8fcfd;">
  <div class="row p-1">
    <div class="col-md-9">
      <div cass="row p-2 justify-content-around">
        <div class="card bg-white w-100" style="padding: 15px; border: none;">
          <div class="row justify-content-between" style="
              margin: inherit;
              box-shadow: 0px 3px 6px #00000029;
              border-radius: 8px;
              padding: 7px 30px 7px 20px !important;
            ">
            <span class="profileTitle" style="font-weight: bold; color: #140202;">Patient Profile</span>
            <img src="../../../assets/images/ui/Icons/patient-medical-module/edit_2.png" width="20rem"
              class="handCursor" (click)="hideBottom()" />
          </div>
          <div class="row p-1 pt-2">
            <div class="col-md-10">
              <form [formGroup]="patientProfileForm">
                <div class="row pb-0">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="label" style="color: #140202;">Patient ID</label>
                      <input type="text" style="
                          font-size: 12px;
                          border-radius: 5px;
                          height: 30px;
                          color: #140202;
                          border: 1px solid #cccccc;
                        " class="form-control bg-white" formControlName="patientID" />
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="label" style="color: #140202;">Medical Record Number</label>
                      <input type="text" style="
                          font-size: 12px;
                          border-radius: 5px;
                          height: 30px;
                          color: #140202;
                          border: 1px solid #cccccc;
                        " class="form-control bg-white" formControlName="medical_record_number" />
                    </div>
                  </div>
                </div>
                <div class="row pb-0">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="label" style="color: #140202;">First Name</label>
                      <input type="text" style="
                          font-size: 12px;
                          border-radius: 5px;
                          height: 30px;
                          color: #140202;
                          border: 1px solid #cccccc;
                        " class="form-control bg-white" formControlName="firstName" />
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="label" style="color: #140202;">Last Name</label>
                      <input type="text" style="
                          font-size: 12px;
                          border-radius: 5px;
                          height: 30px;
                          color: #140202;
                          border: 1px solid #cccccc;
                        " class="form-control bg-white" formControlName="lastName" />
                    </div>
                  </div>
                </div>
                <div class="row pb-0">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="label" style="color: #140202;">Gender</label>
                      <input type="text" style="
                          font-size: 12px;
                          border-radius: 5px;
                          height: 30px;
                          color: #140202;
                          border: 1px solid #cccccc;
                        " class="form-control bg-white" formControlName="gender" />
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="label" style="color: #140202;">Date of Birth</label>
                      <input type="text" style="
                          font-size: 12px;
                          border-radius: 5px;
                          height: 30px;
                          color: #140202;
                          border: 1px solid #cccccc;
                        " class="form-control bg-white" formControlName="dob" />
                    </div>
                  </div>
                </div>
                <div class="row pb-0">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="label" style="color: #140202;">Phone Number</label>
                      <input type="text" style="
                          font-size: 12px;
                          border-radius: 5px;
                          height: 30px;
                          color: #140202;
                          border: 1px solid #cccccc;
                        " class="form-control bg-white" formControlName="phoneNumber" />
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="label" style="color: #140202;">Age</label>
                      <input type="text" style="
                          font-size: 12px;
                          border-radius: 5px;
                          height: 30px;
                          color: #140202;
                          border: 1px solid #cccccc;
                        " class="form-control bg-white" formControlName="age" />
                    </div>
                  </div>
                </div>
                <div class="row pb-0">
                  <div class="col-md-12">
                    <div class="form-group">
                      <label class="label" style="color: #140202;">Email</label>
                      <input type="text" style="
                          font-size: 12px;
                          border-radius: 5px;
                          height: 30px;
                          color: #140202;
                          border: 1px solid #cccccc;
                        " class="form-control bg-white" formControlName="emailID" />
                    </div>
                  </div>
                </div>
                <div class="row pb-0">
                  <div class="col-md-12">
                    <div class="form-group">
                      <label class="label" style="color: #140202;">Address</label>
                      <input type="text" style="
                          font-size: 12px;
                          border-radius: 5px;
                          height: 30px;
                          color: #140202;
                          border: 1px solid #cccccc;
                        " class="form-control bg-white" formControlName="address" />
                    </div>
                  </div>
                </div>
                <div class="row pb-0">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="label" style="color: #140202;">City</label>
                      <input type="text" style="
                          font-size: 12px;
                          border-radius: 5px;
                          height: 30px;
                          color: #140202;
                          border: 1px solid #cccccc;
                        " class="form-control bg-white" formControlName="city" />
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="label" style="color: #140202;">State/Province/Region</label>
                      <input type="text" style="
                          font-size: 12px;
                          border-radius: 5px;
                          height: 30px;
                          color: #140202;
                          border: 1px solid #cccccc;
                        " class="form-control bg-white" formControlName="state" />
                    </div>
                  </div>
                </div>
                <div class="row pb-0">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="label" style="color: #140202;">Country</label>
                      <input type="text" style="
                          font-size: 12px;
                          border-radius: 5px;
                          height: 30px;
                          color: #140202;
                          border: 1px solid #cccccc;
                        " class="form-control bg-white" formControlName="country" />
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="label" style="color: #140202;">Pincode</label>
                      <input type="text" style="
                          font-size: 12px;
                          border-radius: 5px;
                          height: 30px;
                          color: #140202;
                          border: 1px solid #cccccc;
                        " class="form-control bg-white" formControlName="pincode" />
                    </div>
                  </div>
                </div>

                <div class="row justify-content-center p-3">
                  <div class="col-md-8 text-center" *ngIf="isViewBottom">
                    <div *ngIf="isLoading" style="
                        display: flex;
                        justify-content: center;
                        padding-bottom: 7px;
                      ">
                      <mat-progress-spinner class="example-margin" color="primary" mode="indeterminate" [diameter]="30">
                      </mat-progress-spinner>
                    </div>
                    <div>
                      <button class="btn btn-sm mr-4" style="
                          width: 30%;
                          margin-left: -10px;
                          font-size: 14px;
                          font-weight: 500;
                          border: 1px solid #707070;
                          color: #474747;
                          border-radius: 10px;
                        ">
                        Cancel
                      </button>
                      <button class="btn btn-sm" style="
                          width: 30%;
                          color: white;
                          font-size: 14px;
                          font-weight: bold;
                          background-color: #53b9c6;
                          border-radius: 10px;
                        " (click)="updatePatientProfileData()">
                        Save
                      </button>
                    </div>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-3 updata pl-0">
      <div class="bg-white" style="padding: 5px 30px 5px 5px; margin-bottom: 10px;">
        <div class="row" style="justify-content: space-around;">
          <!-- <div>
            <img src="../../../assets/images/ui/Icons/1x/share.png">
          </div> -->
          <div>
            <button class="btn btn-sm" style="
                background-color: #53b9c6;
                color: #ffffff;
                font-weight: 500;
                width: 130%;
              ">
              Export As a PDF
            </button>
          </div>
        </div>
      </div>

      <div class="bg-white pb-2 mb-2 " style="height: 20vh;">
        <div class="justify-content-between row head-bg px-3 mx-0" style="padding: 8px;">
          <div>
            <span class="size12" style="color: #140202;">Family History</span>
          </div>
          <div>
            <img src="../../../assets/images/ui/Icons/patient-medical-module/Icon awesome-eye.png" *ngIf="isViewBottom"
              width="20rem" class="mr-2 handCursor" (click)="viewFamilyHistory(viewFamilyHistoryContent)" />
            <img src="../../../assets/images/ui/Icons/patient-medical-module/edit_2.png" width="20rem"
              class="handCursor" (click)="editFamilyHistory(addFamilyHistoryContent)" />
          </div>
        </div>
        <div class="pb-4">
          <div *ngIf="!(patientFamilyHistory && patientFamilyHistory.length)" style="text-align: center;">
            <span style="color: #140202;">Don't have Family History Records
            </span>
          </div>
          <div class="row p-1 pl-3" *ngFor="
              let patientFamilyData of patientFamilyHistory;
              let i = index
            ">
            <div class="col-md-2 p-0">
              <div class="text-center">
                <img src="../../../assets/images/ui/Icons/patient-medical-module/Ellipse.png" />
              </div>
            </div>
            <div class="col-md-4 p-0">
              <div class="">
                <span class="size11" style="color: #140202;">{{
                  patientFamilyData.dieseaseName ||
                    patientFamilyData.healthCondition
                }}</span>
              </div>
            </div>
            <div class="col-md-5 p-0">
              <div class="">
                <span class="size11" style="color: #140202;">{{
                  patientFamilyData.relationship
                }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="bg-white pb-2 mb-2">
        <div class="justify-content-between row head-bg px-3 mx-0" style="padding: 8px;">
          <div>
            <span class="size12" style="color: #140202;">Allergies</span>
          </div>
          <div>
            <img src="../../../assets/images/ui/Icons/patient-medical-module/Icon awesome-eye.png" *ngIf="isViewBottom"
              width="20rem" class="mr-2 handCursor" (click)="viewAllergies(viewAllergiesContent)" />
            <img src="../../../assets/images/ui/Icons/patient-medical-module/edit_2.png" width="20rem"
              class="handCursor" (click)="addAllergies(addAllergiesContent)" />
          </div>
        </div>
        <div class="pb-4">
          <div *ngIf="!(patientFamilyAllergies && patientFamilyAllergies.length)" style="text-align: center;">
            <span style="color: #140202;">Don't have Allergies Records</span>
          </div>

          <div class="row p-1 pl-3" *ngFor="
              let patientFamilyAllergie of patientFamilyAllergies;
              let i = index
            ">
            <div class="col-md-2 p-0">
              <div class="text-center">
                <img src="../../../assets/images/ui/Icons/patient-medical-module/Ellipse.png" />
              </div>
            </div>
            <div class="col-md-6 p-0">
              <div class="">
                <span class="size11" style="color: #140202;">{{
                  patientFamilyAllergie.allergyInformation ||
                    patientFamilyAllergie.name
                }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="bg-white pb-2 mb-2">
        <div class="justify-content-between row head-bg px-3 mx-0" style="padding: 8px;">
          <div>
            <span class="size12" style="color: #140202;">Files & Documents</span>
          </div>
          <div>
            <img src="../../../assets/images/ui/Icons/patient-medical-module/Icon ionic-ios-add-circle.png"
              width="20rem" class="handCursor" (click)="addFiles(addFilesContent)" />
          </div>
        </div>
        <div class="pb-4 pt-2">
          <div *ngIf="!(patientScreeningRecords && patientScreeningRecords.length)" style="text-align: center;">
            <span style="color: #140202;">Don't have Files & Documents </span>
          </div>
          <div class="p-1 mx-1 d-flex justify-content-around" style="
              border: 1px solid #efefef;
              padding-top: 5px;
              padding-bottom: 5px;
              margin-bottom: 5px;
            " *ngFor="
              let patientScreeningRecordsData of patientScreeningRecords;
              let i = index
            ">
            <div class="col-md-2 p-0" style="margin-right: -35px;">
              <img src="../../../assets/images/ui/Icons/patient-medical-module/Icon awesome-file-alt.png" />
            </div>
            <div class="col-md-8 p-0" style="display: inline-block; text-align: center;">
              <span style="
                  font-size: 9px;
                  font-weight: 600;
                  border: none;
                  color: #140202;
                ">
                {{ patientScreeningRecordsData.recordFilePath.split("/")[3].substr(0,30) }}
              </span>
            </div>
            <div class="col-md-2 p-0" style="text-align: end;">

              <!-- <img src="../../../assets/images/ui/Icons/patient-medical-module/Icon material-delete.png"
                class="handCursor" width="20%" style="margin-right: 3px;" /> -->

              <div ngbDropdown placement="bottom-right" class="d-inline-block" #myDrop="ngbDropdown">
                <img src="../../../assets/images/ui/Icons/patient-medical-module/Icon material-delete.png"
                  class="handCursor" style="width: auto;margin-right: 3px;" id="dropdownBasic1" ngbDropdownToggle />
                <div ngbDropdownMenu aria-labelledby="dropdownBasic1" style="
                      transform: translate(-174px, 17px);
                      width: 218px !important;
                    ">
                  <div class="p-2" style="text-align: center;">
                    <div class="" style="padding: 10px;">
                      <span class="" style="font-size: 12px; font-weight: 500; color: #000000;">Do you want to remove
                        this
                        File?
                      </span>
                    </div>
                  </div>
                  <div class="" style="display: block;">
                    <div class="row" *ngIf="isLoading" style="display: flex; justify-content: center;">
                      <mat-progress-spinner class="example-margin" color="primary" mode="indeterminate" [diameter]="30">
                      </mat-progress-spinner>
                    </div>
                    <div class="row" style="justify-content: center;">
                      <button class="btn btn-sm mouse mr-4" style="
                            height: 30px;
                            border: 1px solid #707070;
                            color: #474747;
                          " (click)="myDrop.close()">
                        Cancel
                      </button>
                      <button type="submit" class="btn btn-sm text-white" style="
                            height: 30px;
                            background-color: #53b9c6;
                            font-weight: bold;
                          " (click)="
                            deletePatientScreeningFile(patientScreeningRecordsData)
                          ">
                        Remove
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <img class="handCursor" style="width: 42%;"
                src="../../../assets/images/ui/Icons/patient-medical-module/Icon feather-download.png" />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #viewFamilyHistoryContent let-modal>
  <div class="modal-header" style="background-color: #53b9c6; color: white;">
    <span class="modal-title justify-content-center" id="modal-basic-title"
      style="font-size: 14px; font-weight: bold; letter-spacing: 0.3px;">Family History</span>
    <img style="width:18px;cursor: pointer;" class="crossImg" (click)="modal.dismiss('Cross click')"
      src="../../../assets/images/ui/Icons/1x/ic_cancel.png">
  </div>
  <div class="modal-body">
    <div class="row justify-content-center px-5">
      <table class="table text-center" border="0|0">
        <thead class=" " style="border: 1px solid white !important;">
          <!--thead-dark-->
          <tr class="small p-0" style="font-weight: normal;">
            <th scope="col" class="p-0 headText border text-center" style="
                border: 1px solid white !important;
                font-size: 14px;
                font-weight: 600;
                color: #140202;
              ">
              No
            </th>
            <th scope="col" class="p-0 headText border text-center" style="
                border: 1px solid white !important;
                font-size: 14px;
                font-weight: 600;
                color: #140202;
              ">
              Disease Name
            </th>
            <th scope="col" class="p-0 headText border text-center" style="
                border: 1px solid white !important;
                font-size: 14px;
                font-weight: 600;
                color: #140202;
              ">
              Relationship
            </th>
          </tr>
        </thead>
        <tbody>
          <tr class="small" *ngFor="let patient of patientFamilyHistory; let i = index">
            <td scope="row" class="text-center" style="
                border: 1px solid white !important;
                font-size: 12px;
                color: #140202;
              ">
              {{ i + 1 }}.
            </td>
            <td class="" style="
                padding-left: 28px;
                border: 1px solid #ffffff;
                font-size: 12px;
                color: #140202;
              ">
              {{ patient.dieseaseName || patient.healthCondition }}
            </td>
            <td class="" style="
                padding-left: 69px;
                border: 1px solid #ffffff;
                font-size: 12px;
                color: #140202;
              ">
              {{ patient.relationship }}
            </td>
          </tr>
        </tbody>
      </table>

      <div *ngIf="!(patientFamilyHistory && patientFamilyHistory.length)" style="text-align: center;">
        <span>Don't have Family History Records </span>
      </div>
    </div>
  </div>
  <div class="modal-footer justify-content-center">
    <button class="btn btn-sm" style="
        width: 20%;
        border-radius: 10px;
        outline-style: none;
        font-weight: bold;
        font-size: 12px;
        background-color: #53b9c6;
        color: white;
      " (click)="modal.close('Close click')">
      Close
    </button>
  </div>
</ng-template>

<ng-template #addFamilyHistoryContent let-modal>
  <div class="modal-header" style="background-color: #53b9c6; color: white;">
    <span class="modal-title justify-content-center" id="modal-basic-title"
      style="font-size: 14px; font-weight: bold; letter-spacing: 0.3px;">Edit Family History</span>
    <img style="width:18px;cursor: pointer;" class="crossImg" (click)="modal.dismiss('Cross click')"
      src="../../../assets/images/ui/Icons/1x/ic_cancel.png">
  </div>
  <div class="modal-body">
    <form [formGroup]="editFamilyHistoryForm" (ngSubmit)="addFamilyHistorySubmit()">
      <div class="row">
        <div class="col-1"></div>
        <div class="col-5 modelBodyHead">
          <span class="pl-5 headText" style="font-size: 14px; font-weight: 600; color: #140202;">Disease Name</span>
        </div>
        <div class="col-6 modelBodyHead" style="padding-left: inherit;">
          <span class="pl-5 headText" style="
              margin-left: -10px;
              font-size: 14px;
              font-weight: 600;
              color: #140202;
            ">Relationship</span>
        </div>
      </div>
      <div formArrayName="familyHistory" class="pt-2">
        <ng-container *ngFor="let desease of familyDeseases.controls; let i = index">
          <div class="form-group row pl-5" [formGroupName]="i">
            <div class="col-md-1" style="line-height: 2; font-size: 12px; color: #140202;">
              {{ i + 1 }}.
            </div>
            <div class="col-md-5">
              <input type="text" formControlName="dieseaseName" style="
                  border-radius: 5px;
                  margin-right: -40px;
                  height: 30px;
                  font-size: 12px;
                  color: #140202;
                " class="form-control" />
            </div>
            <div class="col-md-4">
              <select formControlName="relationship" style="
                  border-radius: 5px;
                  margin-right: -40px;
                  height: 30px;
                  font-size: 12px;
                  color: #140202;
                " class="form-control">
                <option value="parent">Parent</option>
                <option value="grandparent">Grand parent</option>
                <option value="brother">Brother</option>
                <option value="sister">Sister</option>
              </select>
            </div>
            <div class="col-md-2" style="margin-top: 8px;" (click)="removeDesease(i)">
              <img src="../../../assets/images/ui/Icons/patient-medical-module/Icon metro-cancel.png"
                style="margin-top: -9px;" width="20rem" class="handCursor" />
            </div>
          </div>
        </ng-container>
      </div>
      <div class="row py-2 pl-5">
        <div style="padding-left: 54px;" (click)="addMember()">
          <img src="../../../assets/images/ui/Icons/patient-medical-module/Icon ionic-ios-add-circle.png" width="20rem"
            class="handCursor" />
          <span class="px-3 handCursor" style="color: #140202; font-weight: 500;">Add New List</span>
        </div>
      </div>
      <div style="text-align: center;" class="py-3">
        <div *ngIf="isLoading" style="display: flex; justify-content: center; padding-bottom: 7px;">
          <mat-progress-spinner class="example-margin" color="primary" mode="indeterminate" [diameter]="30">
          </mat-progress-spinner>
        </div>
        <button class="save-btn btn btn-sm mr-5" style="
            width: 20%;
            border-radius: 10px;
            margin-right: 90px !important;
            outline-style: none;
            font-weight: bold;
            font-size: 12px;
            background-color: #53b9c6;
            color: white;
          ">
          Save
        </button>
      </div>
    </form>
    <button class="delete-btn btn btn-sm" (click)="deletePatientFamilyHistory()" style="
        outline-style: none;
        font-weight: 500;
        font-size: 12px;
        border-radius: 10px;
        border: 1px solid #474747;
        background-color: #ffffff;
        color: #140202;
        width: 20%;
      ">
      Delete
    </button>
  </div>
</ng-template>

<ng-template #viewAllergiesContent let-modal>
  <div class="modal-header" style="background-color: #53b9c6; color: white;">
    <span class="modal-title justify-content-center" id="modal-basic-title"
      style="font-size: 14px; font-weight: bold; letter-spacing: 0.3px;">Allergies</span>
    <img style="width:18px;cursor: pointer;" class="crossImg" (click)="modal.dismiss('Cross click')"
      src="../../../assets/images/ui/Icons/1x/ic_cancel.png">
  </div>
  <div class="modal-body">
    <div class="row justify-content-center px-5">
      <table class="table text-center" border="0|0" style="border-collapse: collapse;">
        <thead class=" " style="border: 1px solid white !important;">
          <tr class="small p-0" style="font-weight: normal;">
            <th class="p-0" scope="col" class="border text-center" style="
                border: 1px solid white !important;
                font-size: 14px;
                font-weight: 600;
                color: #140202;
              ">
              No
            </th>
            <th class="p-0" scope="col" class="border text-center" style="
                border: 1px solid white !important;
                font-size: 14px;
                font-weight: 600;
                color: #140202;
              ">
              Name
            </th>
            <th class="p-0" scope="col" class="border text-center" style="
                border: 1px solid white !important;
                font-size: 14px;
                font-weight: 600;
                color: #140202;
              ">
              Notes
            </th>
          </tr>
        </thead>
        <tbody style="border: 1px solid white !important;">
          <tr class="small" *ngFor="let patient of patientFamilyAllergies; let i = index">
            <td scope="row" class="text-center" style="
                border: 1px solid white !important;
                font-size: 12px;
                color: #140202;
              ">
              {{ i + 1 }}
            </td>
            <td class="" style="
                border: 1px solid white !important;
                padding-left: 30px !important;
                font-size: 12px;
                color: #140202;
              ">
              {{ patient.allergyInformation || patient.name }}
            </td>
            <td class="" style="
                border: 1px solid white !important;
                padding-left: 105px !important;
                font-size: 12px;
                color: #140202;
              ">
              {{ patient.note || patient.allergy_record_id }}
            </td>
          </tr>
        </tbody>
      </table>
      <div *ngIf="!(patientFamilyAllergies && patientFamilyAllergies.length)" style="text-align: center;">
        <span>Don't have Family History Records </span>
      </div>
    </div>
  </div>
  <div class="modal-footer justify-content-center">
    <button class="btn btn-sm" style="
        width: 20%;
        border-radius: 10px;
        outline-style: none;
        font-weight: bold;
        font-size: 12px;
        background-color: #53b9c6;
        color: white;
      " (click)="modal.close('Close click')">
      Close
    </button>
  </div>
</ng-template>

<ng-template #addAllergiesContent let-modal>
  <div class="modal-header" style="background-color: #53b9c6; color: white;">
    <span class="modal-title justify-content-center" id="modal-basic-title"
      style="font-size: 14px; font-weight: bold; letter-spacing: 0.3px;">Add Allergies</span>
    <img style="width:18px;cursor: pointer;" class="crossImg" (click)="modal.dismiss('Cross click')"
      src="../../../assets/images/ui/Icons/1x/ic_cancel.png">
  </div>
  <div class="modal-body">
    <form [formGroup]="editAllergiesForm" (ngSubmit)="addPatientAllergiesSubmit()">
      <div class="row">
        <div class="col-1"></div>
        <div class="col-5 modelBodyHead">
          <span class="pl-5" style="font-size: 14px; font-weight: 600; color: #140202;">Name</span>
        </div>
        <div class="col-6 modelBodyHead" style="padding-left: inherit;">
          <span class=" " style="font-size: 14px; font-weight: 600; color: #140202;">Notes</span>
        </div>
      </div>
      <div formArrayName="allergiesHistory" class="pt-2">
        <ng-container *ngFor="let desease of allergiesList.controls; let i = index">
          <div class="form-group row pl-5" [formGroupName]="i">
            <div class="col-md-1" style="line-height: 2; font-size: 12px; color: #140202;">
              {{ i + 1 }}.
            </div>
            <div class="col-md-4">
              <input type="text" formControlName="allergieName" style="
                  border-radius: 5px;
                  margin-right: -40px;
                  height: 30px;
                  font-size: 12px;
                  color: #140202;
                " class="form-control" />
            </div>
            <div class="col-md-5">
              <input type="text" formControlName="notes" style="
                  border-radius: 5px;
                  margin-right: -40px;
                  height: 30px;
                  font-size: 12px;
                  color: #140202;
                " class="form-control" />
            </div>
            <div class="col-md-2" style="margin-top: 8px; line-height: initial;" (click)="removeAllergie(i)">
              <img src="../../../assets/images/ui/Icons/patient-medical-module/Icon metro-cancel.png"
                style="margin-top: -7px;" width="20rem" class="handCursor" />
            </div>
          </div>
        </ng-container>
      </div>
      <div class="row py-2 pl-5">
        <div style="padding-left: 52px;" (click)="addAllergie()">
          <img src="../../../assets/images/ui/Icons/patient-medical-module/Icon ionic-ios-add-circle.png" width="20rem"
            class="handCursor" />
          <span class="px-3 handCursor" style="color: #140202; font-weight: 500;">Add New List</span>
        </div>
      </div>
      <div style="text-align: center;" class="py-3">
        <div *ngIf="isLoading" style="display: flex; justify-content: center; padding-bottom: 7px;">
          <mat-progress-spinner class="example-margin" color="primary" mode="indeterminate" [diameter]="30">
          </mat-progress-spinner>
        </div>
        <button class="save-btn btn btn-sm mr-1" style="
            width: 20%;
            border-radius: 10px;
            margin-right: 90px !important;
            outline-style: none;
            font-weight: bold;
            font-size: 12px;
            background-color: #53b9c6;
            color: white;
          ">
          Save
        </button>
      </div>
    </form>
    <button class="delete-btn btn btn-sm" (click)="deletePatientAllergies()" style="
        outline-style: none;
        font-weight: 500;
        font-size: 12px;
        border-radius: 10px;
        border: 1px solid #474747;
        background-color: #ffffff;
        color: #140202;
        width: 20%;
      ">
      Delete
    </button>
  </div>
</ng-template>

<ng-template #addFilesContent let-modal>
  <div class="modal-header" style="background-color: #53b9c6; color: white;">
    <span class="modal-title justify-content-center" id="modal-basic-title"
      style="font-size: 14px; font-weight: bold; letter-spacing: 0.3px;">Add File / Document</span>
    <img style="width:18px;cursor: pointer;" class="crossImg" (click)="modal.dismiss('Cross click')"
      src="../../../assets/images/ui/Icons/1x/ic_cancel.png">
  </div>
  <div class="modal-body">
    <div style="padding-bottom: 7px;">
      <span style="margin-left: 20px; font-weight: 600; color: #140202;">Upload File</span>
    </div>
    <form [formGroup]="addPatientScreeningRecordForm">
      <!--(ngSubmit)="addPatientScreeningRecordSubmit()"-->
      <div class="text-center py-3" style="
          border: dashed;
          color: #707070;
          border-radius: 8px;
          margin-left: 20px;
          margin-right: 20px;
          padding-bottom: 7px;
        ">
        <!--Upload IMg-->
        <div class="justify-content-center" style="text-align: -webkit-center; padding-left: 20px;">
          <div class="container">
            <div class="row">
              <div class="img-move input-group handCursor" style="justify-content: center;">
                <input type="file" class="form-control" name="file" id="inputGroupFile01" #fileInput
                  aria-describedby="inputGroupFileAddon01" accept=".png, .jpg, .jpeg, .pdf"
                  (change)="fileProgress($event)" class="d-none" />

                <span (click)="fileInput.click()" style="
                    font-size: 14px;
                    font-weight: 500;
                    border-bottom: 0.3px solid #3e454c;
                    color: #503838;
                  ">choose a file</span>
              </div>
            </div>
          </div>
        </div>
        <!-- Upload IMG Ends-->
      </div>

      <div style="border: 1px solid #3e454c; margin: 20px;"></div>

      <div class="pb-4 pt-2">
        <div *ngIf="!(patientScreeningRecords && patientScreeningRecords.length)" style="text-align: center;"
          class="pb-4">
          <span style="color: #140202;">Don't have Files & Documents </span>
        </div>

        <div class="pt-1 row justify-content-between px-4">
          <div class="pb-3" style="font-weight: 500; padding-left: 20px;">
            {{ fileName }} {{ fileSize }} {{ fileValue }}
          </div>
        </div>

        <div class="mx-4 mb-4 d-flex justify-content-around" style="padding: 12px; border: 1px solid #cccccc;" *ngFor="
            let patientScreeningRecordsData of patientScreeningRecords;
            let i = index
          ">
          <div class="col-md-10">
            <div class="d-flex row">
              <div style="margin-right: 10px;">
                <img src="../../../assets/images/ui/Icons/patient-medical-module/Icon awesome-file-alt.png" class="" />
              </div>
              <div class="">
                <span style="font-size: 9px; font-weight: 600;">{{
                  patientScreeningRecordsData.recordFilePath.split("/")[3].substr(0,30)
                }}</span>
              </div>
            </div>
          </div>
          <div class="col-md-2" style="text-align: end;">
            <div ngbDropdown placement="bottom-right" class="d-inline-block" #myDrop="ngbDropdown">
              <img src="../../../assets/images/ui/Icons/patient-medical-module/Icon material-delete.png"
                class="handCursor" style="width: auto;" id="dropdownBasic1" ngbDropdownToggle />
              <div ngbDropdownMenu aria-labelledby="dropdownBasic1" style="
                  transform: translate(-174px, 17px);
                  width: 218px !important;
                ">
                <div class="p-2" style="text-align: center;">
                  <div class="" style="padding: 10px;">
                    <span class="" style="font-size: 12px; font-weight: 500; color: #000000;">Do you want to remove this
                      File?
                    </span>
                  </div>
                </div>
                <div class="" style="display: block;">
                  <div class="row" *ngIf="isLoading" style="display: flex; justify-content: center;">
                    <mat-progress-spinner class="example-margin" color="primary" mode="indeterminate" [diameter]="30">
                    </mat-progress-spinner>
                  </div>
                  <div class="row" style="justify-content: center;">
                    <button class="btn btn-sm mouse mr-4" style="
                        height: 30px;
                        border: 1px solid #707070;
                        color: #474747;
                      " (click)="myDrop.close()">
                      Cancel
                    </button>
                    <button type="submit" class="btn btn-sm text-white" style="
                        height: 30px;
                        background-color: #53b9c6;
                        font-weight: bold;
                      " (click)="
                        deletePatientScreeningFile(patientScreeningRecordsData)
                      ">
                      Remove
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="" style="text-align: center;">
          <div *ngIf="isLoading" style="display: flex; justify-content: center; padding-bottom: 5px;">
            <mat-progress-spinner class="example-margin" color="primary" mode="indeterminate" [diameter]="30">
            </mat-progress-spinner>
          </div>

          <button class="btn btn-sm mr-3" style="
              outline-style: none;
              font-weight: 500;
              font-size: 12px;
              border-radius: 10px;
              border: 1px solid #707070;
              background-color: #ffffff;
              color: #474747;
              width: 20%;
            " (click)="modal.close('Close click')">
            Cancel
          </button>

          <button class="btn btn-sm" style="
              border-radius: 10px;
              width: 25%;
              height: 30px;
              outline-style: none;
              font-weight: bold;
              font-size: 12px;
              background-color: #53b9c6;
              color: white;
            " (click)="addPatientScreeningRecordSubmit()">
            Attach Files
          </button>
        </div>
      </div>
    </form>
  </div>
</ng-template>